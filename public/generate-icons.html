<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerador de √çcones PWA - Sellx</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
      min-height: 100vh;
      padding: 40px 20px;
      color: #333;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    h1 {
      color: #1e3a5f;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }

    .preview-section {
      background: #f5f5f5;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      text-align: center;
    }

    .preview-section h2 {
      margin-bottom: 20px;
      color: #1e3a5f;
    }

    #preview {
      width: 192px;
      height: 192px;
      border-radius: 24px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }

    .sizes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 16px;
      margin-bottom: 30px;
    }

    .size-item {
      background: #f9f9f9;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 16px;
      text-align: center;
      transition: all 0.2s;
    }

    .size-item:hover {
      border-color: #1e3a5f;
      transform: translateY(-2px);
    }

    .size-item canvas {
      border-radius: 8px;
      margin-bottom: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .size-item .label {
      font-size: 14px;
      font-weight: 600;
      color: #1e3a5f;
    }

    .size-item .status {
      font-size: 12px;
      color: #22c55e;
      margin-top: 4px;
    }

    .buttons {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    button {
      flex: 1;
      min-width: 200px;
      padding: 16px 24px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(30, 58, 95, 0.4);
    }

    .btn-secondary {
      background: #22c55e;
      color: white;
    }

    .btn-secondary:hover {
      background: #16a34a;
    }

    .instructions {
      margin-top: 30px;
      padding: 20px;
      background: #fff3cd;
      border-radius: 12px;
      border-left: 4px solid #ffc107;
    }

    .instructions h3 {
      color: #856404;
      margin-bottom: 10px;
    }

    .instructions ol {
      color: #856404;
      padding-left: 20px;
    }

    .instructions li {
      margin-bottom: 8px;
    }

    .progress {
      margin-top: 20px;
      padding: 16px;
      background: #d4edda;
      border-radius: 8px;
      color: #155724;
      display: none;
    }

    .progress.show {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé® Gerador de √çcones PWA</h1>
    <p class="subtitle">Gere todos os √≠cones necess√°rios para o Sellx PWA</p>

    <div class="preview-section">
      <h2>Preview do √çcone</h2>
      <canvas id="preview" width="192" height="192"></canvas>
    </div>

    <h2 style="margin-bottom: 16px; color: #1e3a5f;">Tamanhos a Gerar</h2>
    <div class="sizes-grid" id="sizesGrid"></div>

    <div class="buttons">
      <button class="btn-primary" onclick="generateAllIcons()">
        üì• Baixar Todos os √çcones (ZIP)
      </button>
      <button class="btn-secondary" onclick="generateIndividual()">
        üìÅ Baixar Individualmente
      </button>
    </div>

    <div class="progress" id="progress">
      ‚úÖ √çcones gerados com sucesso! Verifique sua pasta de downloads.
    </div>

    <div class="instructions">
      <h3>üìã Instru√ß√µes</h3>
      <ol>
        <li>Clique em "Baixar Todos os √çcones" para gerar um ZIP com todos os tamanhos</li>
        <li>Extraia o ZIP na pasta <code>public/icons/</code> do projeto</li>
        <li>Os √≠cones ser√£o usados automaticamente pelo PWA</li>
        <li>Rode <code>npm run build</code> para atualizar o Service Worker</li>
      </ol>
    </div>
  </div>

  <script>
    const SIZES = [72, 96, 128, 144, 152, 192, 384, 512];

    // SVG do √≠cone
    const svgIcon = `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <defs>
          <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#1e3a5f;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#2d5a87;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="512" height="512" rx="96" ry="96" fill="url(#bgGradient)"/>
        <g transform="translate(256, 256)">
          <path
            d="M-120 -60 L-100 -60 L-60 60 L100 60 L120 -20 L-40 -20 L-50 -60 L-120 -60"
            fill="none"
            stroke="white"
            stroke-width="24"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <circle cx="-40" cy="100" r="24" fill="white"/>
          <circle cx="70" cy="100" r="24" fill="white"/>
          <g transform="translate(60, -80)">
            <circle cx="0" cy="0" r="50" fill="#22c55e"/>
            <text
              x="0"
              y="12"
              font-family="Arial, sans-serif"
              font-size="48"
              font-weight="bold"
              fill="white"
              text-anchor="middle"
            >$</text>
          </g>
        </g>
      </svg>
    `;

    // Renderiza preview
    function renderPreview() {
      const canvas = document.getElementById('preview');
      renderIcon(canvas, 192);
    }

    // Renderiza √≠cone em um canvas
    function renderIcon(canvas, size) {
      return new Promise((resolve) => {
        const ctx = canvas.getContext('2d');
        canvas.width = size;
        canvas.height = size;

        const img = new Image();
        const blob = new Blob([svgIcon], { type: 'image/svg+xml' });
        const url = URL.createObjectURL(blob);

        img.onload = () => {
          ctx.drawImage(img, 0, 0, size, size);
          URL.revokeObjectURL(url);
          resolve(canvas);
        };

        img.src = url;
      });
    }

    // Cria grid de tamanhos
    function createSizesGrid() {
      const grid = document.getElementById('sizesGrid');

      SIZES.forEach(size => {
        const item = document.createElement('div');
        item.className = 'size-item';
        item.innerHTML = `
          <canvas id="canvas-${size}" width="${Math.min(size, 80)}" height="${Math.min(size, 80)}"
                  style="width: ${Math.min(size, 80)}px; height: ${Math.min(size, 80)}px;"></canvas>
          <div class="label">${size}x${size}</div>
          <div class="status">‚úì Pronto</div>
        `;
        grid.appendChild(item);

        // Renderiza miniatura
        setTimeout(() => {
          const canvas = document.getElementById(`canvas-${size}`);
          renderIcon(canvas, Math.min(size, 80));
        }, 100);
      });
    }

    // Gera todos os √≠cones e baixa como ZIP
    async function generateAllIcons() {
      // Usar JSZip se dispon√≠vel, sen√£o baixar individualmente
      if (typeof JSZip === 'undefined') {
        // Carregar JSZip dinamicamente
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
        script.onload = () => generateZip();
        document.head.appendChild(script);
      } else {
        generateZip();
      }
    }

    async function generateZip() {
      const zip = new JSZip();
      const folder = zip.folder('icons');

      for (const size of SIZES) {
        const canvas = document.createElement('canvas');
        await renderIcon(canvas, size);

        // Converter para blob
        const dataUrl = canvas.toDataURL('image/png');
        const base64 = dataUrl.split(',')[1];
        folder.file(`icon-${size}x${size}.png`, base64, { base64: true });
      }

      // Gerar e baixar ZIP
      const content = await zip.generateAsync({ type: 'blob' });
      const url = URL.createObjectURL(content);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'sellx-pwa-icons.zip';
      a.click();
      URL.revokeObjectURL(url);

      document.getElementById('progress').classList.add('show');
    }

    // Baixa √≠cones individualmente
    async function generateIndividual() {
      for (const size of SIZES) {
        const canvas = document.createElement('canvas');
        await renderIcon(canvas, size);

        const url = canvas.toDataURL('image/png');
        const a = document.createElement('a');
        a.href = url;
        a.download = `icon-${size}x${size}.png`;
        a.click();

        // Pequeno delay entre downloads
        await new Promise(r => setTimeout(r, 300));
      }

      document.getElementById('progress').classList.add('show');
    }

    // Inicializar
    renderPreview();
    createSizesGrid();
  </script>
</body>
</html>
